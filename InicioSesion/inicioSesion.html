<!DOCTYPE html>
<html>
<head>
  <title>Página de Inicio de Sesión</title>
  <link rel="stylesheet" type="text/css" href="../Registro/registro.css">
</head>
<body>
 
  
  <div class="container">
    <h1>Iniciar Sesión</h1>
    <form id="loginForm">
      <div class="formu-cajita">
        <label for="username">Email:</label>
        <input type="text" id="username" name="username" required>
      </div>
      <div class="formu-cajita">
        <label for="password">Contraseña:</label>
        <input type="password" id="password" name="password" required>
      </div>
      <button id="manda" class="button" type="submit">Iniciar Sesión</button>
      
    </form>
    <p>¿No tienes una cuenta? <a href="../Registro/registro.html">Regístrate</a></p>
    <p><a href="../Index/index.html">Volver a la página principal</a></p>
  </div>
  
  <!-- Agrega la biblioteca de Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-auth.js"></script>

<script>
  // Configura la conexión con Firebase
  const firebaseConf = {
    apiKey: "AIzaSyCECiCk4tWmTY6CjF2_IGhmdm05soMX46U",
    authDomain: "organiko-cedb5.firebaseapp.com",
    projectId: "organiko-cedb5",
    storageBucket: "organiko-cedb5.appspot.com",
    messagingSenderId: "182438650817",
    appId: "1:182438650817:web:65272dde3f1ed36dba4540"
  };
  

  // Inicializa Firebase
  firebase.initializeApp(firebaseConf);

  var loginForm = document.getElementById("loginForm");

  loginForm.addEventListener("submit", function(event) {
  event.preventDefault();

  var email = document.getElementById("username").value;
  var password = document.getElementById("password").value;

  firebase.auth().signInWithEmailAndPassword(email, password)
    .then(function(userCredential) {
      
      var user = userCredential.user;
     alert("Usuario autenticado:", user);
      // Obtener el usuario actual
      var user = firebase.auth().currentUser;

     
      sessionStorage.setItem('usuario', email);
      console.log(" user " + usuario); 

      var usuario = sessionStorage.getItem('usuario');
    

      
      window.location.href = "../Index/index.html"; 
    })
    .catch(function(error) {
      // Se produjo un error durante el inicio de sesión
      var errorCode = error.code;
      var errorMessage = error.message;
      alert("Error de inicio de sesión:", errorCode, errorMessage);
    });
});

</script>

  </script>
</body>
</html>